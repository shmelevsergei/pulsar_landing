import*as THREE from"three";import{OrbitControls}from"OrbitControls";import{GLTFLoader}from"GLTFLoader";import{RectAreaLightHelper}from"RectAreaLightHelper";import{RectAreaLightUniformsLib}from"RectAreaLightUniformsLib";import preloader from"./preloader.js";import animateBlocks from"./animate.js";import tabsButton from"./tabs.js";document.addEventListener("DOMContentLoaded",(()=>{Splitting(),luxy.init(),preloader(),function(){let e=document.querySelector(".js_3d-model");const t=e.clientWidth,o=e.clientHeight;!function(){const r=new THREE.Scene,a=new THREE.PerspectiveCamera(75,t/o,.1,1e3);a.position.set(0,0,150);const n=new THREE.WebGLRenderer({antialias:!0,alfa:!0});n.setSize(t,o),n.setClearColor(0,0),e.appendChild(n.domElement);const i=new THREE.AmbientLight(16777215);r.add(i),(new GLTFLoader).load("./images/model/pulsar.gltf",(e=>{e.scene.scale.multiplyScalar(.35),e.scene.position.x=10,e.scene.position.z=0,e.scene.position.y=-10,r.add(e.scene)}),(e=>{console.log("Error: "+e)}));{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,0),e.lookAt(0,-1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,-1,0),e.lookAt(0,1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,1),e.lookAt(0,1,0),r.add(e)}RectAreaLightUniformsLib.init();{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(-1,0,0),e.rotation.y=Math.PI+Math.PI/4,r.add(e)}{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(0,-1,0),e.rotation.y=Math.PI-Math.PI/4,r.add(e)}const s=new OrbitControls(a,n.domElement);s.enableZoom=!1,s.autoRotate=!0,s.autoRotateSpeed=2,s.enableDamping=!1,s.minPolarAngle=1,s.maxPolarAngle=1,window.addEventListener("resize",(function(){a.aspect=t/o,a.updateProjectionMatrix(),n.setSize(t,o)}),!1),function e(){requestAnimationFrame(e),s.update(),n.render(r,a)}()}()}(),animateBlocks(),gsap.from(".parallax__col._left",{scrollTrigger:{trigger:".parallax__wrapper",start:"top bottom",scrub:1.9},yPercent:10}),gsap.to(".parallax__col._right",{scrollTrigger:{trigger:".parallax__wrapper",start:"top top",scrub:1.9},yPercent:-20});const e=document.querySelector(".tabs-button"),t=document.querySelectorAll(".tabs-button"),o=document.querySelectorAll(".tabs-item");tabsButton(t,o,e),gsap.registerPlugin(ScrollTrigger);!function(e,t){const o=document.getElementById(e),r=o.getContext("2d");o.width=1920,o.height=1080;for(let e=0;e<=t.totalFrames;e++){const o=new Image;o.src=t.currentImage(e),t.images.push(o)}gsap.to(t,{currentFrame:t.totalFrames,snap:"currentFrame",ease:"none",scrollTrigger:{trigger:o,start:"top",end:"bottom+="+t.totalFrames*t.totalTime,scrub:!0,pin:!0,markers:!0},onUpdate:function(){r.clearRect(0,0,o.width,o.height),r.drawImage(t.images[t.currentFrame],0,0)}}),t.images[0].onload=()=>{r.drawImage(t.images[0],0,0)}}("video-present",{totalFrames:73,totalTime:5,images:[],currentFrame:0,currentImage:e=>`../images/frames/presents/${e}.webp`})}));