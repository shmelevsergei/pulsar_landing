import*as THREE from"three";import{OrbitControls}from"OrbitControls";import{GLTFLoader}from"GLTFLoader";import{RectAreaLightHelper}from"RectAreaLightHelper";import{RectAreaLightUniformsLib}from"RectAreaLightUniformsLib";import preloader from"./preloader.js";import animateBlocks from"./animate.js";import animateHeader from"./fixed-header.js";import tabsButton from"./tabs.js";document.addEventListener("DOMContentLoaded",(()=>{Splitting(),preloader(),animateHeader(),function(){let e=document.querySelector(".js_3d-model");const t=e.clientWidth,o=e.clientHeight;!function(){const r=new THREE.Scene,n=new THREE.PerspectiveCamera(75,t/o,.1,1e3);n.position.set(0,0,150);const a=new THREE.WebGLRenderer({antialias:!0,alfa:!0});a.setSize(t,o),a.setClearColor(0,0),e.appendChild(a.domElement);const i=new THREE.AmbientLight(16777215);r.add(i),(new GLTFLoader).load("./images/model/pulsar.gltf",(e=>{e.scene.scale.multiplyScalar(.35),e.scene.position.x=10,e.scene.position.z=0,e.scene.position.y=-10,r.add(e.scene)}),(e=>{console.log("Error: "+e)}));{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,0),e.lookAt(0,-1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,-1,0),e.lookAt(0,1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,1),e.lookAt(0,1,0),r.add(e)}RectAreaLightUniformsLib.init();{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(-1,0,0),e.rotation.y=Math.PI+Math.PI/4,r.add(e)}{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(0,-1,0),e.rotation.y=Math.PI-Math.PI/4,r.add(e)}const c=new OrbitControls(n,a.domElement);c.enableZoom=!1,c.autoRotate=!0,c.autoRotateSpeed=2,c.enableDamping=!1,c.minPolarAngle=1,c.maxPolarAngle=1,window.addEventListener("resize",(function(){n.aspect=t/o,n.updateProjectionMatrix(),a.setSize(t,o)}),!1),function e(){requestAnimationFrame(e),c.update(),a.render(r,n)}()}()}(),animateBlocks(),gsap.from(".parallax__col._left",{scrollTrigger:{trigger:".parallax__wrapper",start:"top bottom",scrub:1.9},yPercent:10}),gsap.to(".parallax__col._right",{scrollTrigger:{trigger:".parallax__wrapper",start:"top top",scrub:1.9},yPercent:-20});const e=document.querySelector(".tabs-button"),t=document.querySelectorAll(".tabs-button"),o=document.querySelectorAll(".tabs-item");tabsButton(t,o,e),gsap.registerPlugin(ScrollTrigger),function(){const e=document.querySelector(".present"),t=document.getElementById("video-present"),o=t.getContext("2d"),r=document.querySelector(".present__top-descr"),n=document.querySelector(".present__middle-descr"),a=document.querySelector(".present__bottom-descr");t.width=1920,t.height=1080;let i=[],c={frame:0};for(let e=0;e<78;e++){let t=new Image;t.src=`../images/frames/presents/${e}.webp`,i.push(t)}function s(){o.clearRect(0,0,t.width,t.height),o.drawImage(i[c.frame],0,0)}gsap.timeline({onUpdate:s,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=400%"}}).to(r,{opacity:1,duration:6}).to(r,{opacity:0}).to(n,{opacity:1,duration:6}).to(n,{opacity:0}).to(a,{opacity:1,duration:6}).to(a,{opacity:0}).to(c,{frame:77,snap:"frame",ease:"none",duration:20},0),i[0].onload=s}(),function(){const e=document.querySelector(".particles"),t=document.getElementById("video-particles"),o=t.getContext("2d");t.width=1920,t.height=1080;let r=[],n={frame:0};for(let e=0;e<138;e++){let t=new Image;t.src=`../images/frames/particles/${e}.webp`,r.push(t)}function a(){o.clearRect(0,0,t.width,t.height),o.drawImage(r[n.frame],0,0)}gsap.timeline({onUpdate:a,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=200%"}}).to(n,{frame:137,snap:"frame",ease:"none",duration:1},0),r[0].onload=a}(),function(){const e=document.querySelector(".manifestation"),t=document.getElementById("video-manifestation"),o=t.getContext("2d");t.width=1920,t.height=1080;let r=[],n={frame:0};for(let e=0;e<99;e++){let t=new Image;t.src=`../images/frames/manifestation/${e}.webp`,r.push(t)}function a(){o.clearRect(0,0,t.width,t.height),o.drawImage(r[n.frame],0,0)}gsap.timeline({onUpdate:a,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=200%"}}).to(n,{frame:98,snap:"frame",ease:"none",duration:1},0),r[0].onload=a}(),function(){const e=document.querySelector(".accum"),t=document.getElementById("accum-video"),o=t.getContext("2d"),r=document.querySelector(".accum__descr-top"),n=document.querySelector(".accum__descr-bottom");t.width=1920,t.height=1080;let a=[],i={frame:0};for(let e=0;e<213;e++){let t=new Image;t.src=`../images/frames/accum/${e}.webp`,a.push(t)}function c(){o.clearRect(0,0,t.width,t.height),o.drawImage(a[i.frame],0,0)}gsap.timeline({onUpdate:c,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=400%"}}).to(r,{opacity:1,duration:6}).to(r,{opacity:0}).to(n,{opacity:1,duration:6}).to(n,{opacity:0}).to(i,{frame:212,snap:"frame",ease:"none",duration:14},0),a[0].onload=c}(),function(){const e=document.querySelector(".trigger"),t=document.getElementById("trigger-demo"),o=t.getContext("2d"),r=document.querySelector(".trigger__descr");t.width=1920,t.height=1080;let n=[],a={frame:0};for(let e=0;e<93;e++){let t=new Image;t.src=`../images/frames/trigger/${e}.webp`,n.push(t)}function i(){o.clearRect(0,0,t.width,t.height),o.drawImage(n[a.frame],0,0)}gsap.timeline({onUpdate:i,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=200%"}}).to(r,{opacity:1,duration:10}).to(r,{opacity:0}).to(a,{frame:92,snap:"frame",ease:"none",duration:12},0),n[0].onload=i}(),function(){const e=document.querySelector(".return"),t=document.getElementById("return-demo"),o=t.getContext("2d"),r=document.querySelector(".return__descr");t.width=1920,t.height=1080;let n=[],a={frame:0};for(let e=0;e<216;e++){let t=new Image;t.src=`../images/frames/return/${e}.webp`,n.push(t)}function i(){o.clearRect(0,0,t.width,t.height),o.drawImage(n[a.frame],0,0)}gsap.timeline({onUpdate:i,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=200%"}}).to(r,{opacity:1,duration:10}).to(r,{opacity:0}).to(a,{frame:215,snap:"frame",ease:"none",duration:12},0),n[0].onload=i}(),function(){const e=document.querySelector(".lights"),t=document.getElementById("lights-demo"),o=t.getContext("2d"),r=document.querySelector(".lights__descr");t.width=1920,t.height=1080;let n=[],a={frame:0};for(let e=0;e<422;e++){let t=new Image;t.src=`../images/frames/lights/${e}.webp`,n.push(t)}function i(){o.clearRect(0,0,t.width,t.height),o.drawImage(n[a.frame],0,0)}gsap.timeline({onUpdate:i,scrollTrigger:{trigger:e,pin:!0,scrub:!0,end:"+=400%"}}).to(r,{opacity:1,duration:10}).to(r,{opacity:0}).to(a,{frame:421,snap:"frame",ease:"none",duration:12},0),n[0].onload=i}()}));