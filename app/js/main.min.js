import*as THREE from"three";import{OrbitControls}from"OrbitControls";import{GLTFLoader}from"GLTFLoader";import{RectAreaLightHelper}from"RectAreaLightHelper";import{RectAreaLightUniformsLib}from"RectAreaLightUniformsLib";import preloader from"./preloader.js";import animate from"./animate.js";document.addEventListener("DOMContentLoaded",(()=>{function e(e,t){const a=document.getElementById(e),r=a.getContext("2d");document.querySelectorAll(".video-block");a.width=window.innerWidth,a.height=window.innerHeight;for(let e=0;e<=t.totalFrames;e++){const a=new Image;a.src=t.currentImage(e),t.images.push(a)}gsap.to(t,{currentFrame:t.totalFrames,snap:"currentFrame",ease:"none",scrollTrigger:{trigger:a,start:"top",end:"bottom+="+t.totalFrames*t.totalTime,scrub:2,pin:!0},onUpdate:function(){r.clearRect(0,0,a.width,a.height),r.drawImage(t.images[t.currentFrame],0,0)}}),t.images[0].onload=()=>{r.drawImage(t.images[0],0,0)}}preloader(),gsap.registerPlugin(ScrollTrigger);!function(){let e=document.querySelector(".js_3d-model");const t=e.clientWidth,a=e.clientHeight;!function(){const r=new THREE.Scene,o=new THREE.PerspectiveCamera(75,t/a,.1,1e3);o.position.set(0,0,150);const i=new THREE.WebGLRenderer({antialias:!0,alfa:!0});i.setSize(t,a),i.setClearColor(0,0),e.appendChild(i.domElement);const n=new THREE.AmbientLight(16777215);r.add(n),(new GLTFLoader).load("./images/model/pulsar.gltf",(e=>{e.scene.scale.multiplyScalar(.35),e.scene.position.x=10,e.scene.position.z=0,e.scene.position.y=-10,r.add(e.scene)}),(e=>{console.log("Error: "+e)}));{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,0),e.lookAt(0,-1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,-1,0),e.lookAt(0,1,0),r.add(e)}{const e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,1),e.lookAt(0,1,0),r.add(e)}RectAreaLightUniformsLib.init();{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(-1,0,0),e.rotation.y=Math.PI+Math.PI/4,r.add(e)}{const e=new THREE.RectAreaLight(16777215,1,100,100);e.position.set(0,-1,0),e.rotation.y=Math.PI-Math.PI/4,r.add(e)}const s=new OrbitControls(o,i.domElement);s.enableZoom=!1,s.autoRotate=!0,s.autoRotateSpeed=2,s.enableDamping=!1,s.minPolarAngle=1,s.maxPolarAngle=1,window.addEventListener("resize",(function(){o.aspect=t/a,o.updateProjectionMatrix(),i.setSize(t,a)}),!1),function e(){requestAnimationFrame(e),s.update(),i.render(r,o)}()}()}(),e("video-present",{totalFrames:73,totalTime:5,images:[],currentFrame:0,currentImage:e=>`../images/frames/presents/${e}.webp`}),e("video-demo",{totalFrames:138,totalTime:5,images:[],currentFrame:0,currentImage:e=>`../images/frames/particles/${e}.webp`}),e("video-demo-1",{totalFrames:99,totalTime:3,images:[],currentFrame:0,currentImage:e=>`../images/frames/manifestation/${e}.webp`}),e("accum-demo",{totalFrames:213,totalTime:8,images:[],currentFrame:0,currentImage:e=>`../images/frames/accum/${e}.webp`}),e("trigger-demo",{totalFrames:93,totalTime:3,images:[],currentFrame:0,currentImage:e=>`../images/frames/trigger/${e}.webp`}),e("return-demo",{totalFrames:216,totalTime:8,images:[],currentFrame:0,currentImage:e=>`../images/frames/return/${e}.webp`}),e("lights-demo",{totalFrames:422,totalTime:10,images:[],currentFrame:0,currentImage:e=>`../images/frames/lights/${e}.webp`}),animate();const t=document.querySelector(".tabs-button"),a=document.querySelectorAll(".tabs-button"),r=document.querySelectorAll(".tabs-item");var o,i,n;i=r,n=t,(o=a).forEach((e=>{e.addEventListener("click",(()=>{let t=e,a=t.getAttribute("data-tab"),r=document.querySelector(a);function n(e){e.forEach((e=>{e.classList.remove("_active")}))}t.classList.contains("_active")||(n(o),n(i),t.classList.add("_active"),r.classList.add("_active"))})),n.click()}))}));